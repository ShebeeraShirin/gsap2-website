/* Kardio Tag v1.0  | Site: This is Digital (ID: 13) | Generated: 12-05-2025 11:45:20 */
if(window.kardio_data=window.kardio_data||[],navigator.cookieEnabled)var kardio=function(){var e="https://app.gokard.io/api/capture",t=["thisisdigital.co.uk","081a87-3.myshopify.com","paypal.com"];function n(e,t,n,r){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="; expires="+o.toGMTString();r&&(t=encodeURIComponent(t)),document.cookie=e+"="+t+i+"; domain=.thisisdigital.co.uk; path=/"}function r(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t)){var i=o.substring(t.length,o.length);return decodeURIComponent(i)}}}function o(){if(window.crypto&&window.crypto.randomUUID)return window.crypto.randomUUID();if(!o.lut){o.lut=[];for(var e=0;e<256;e++)o.lut[e]=(e<16?"0":"")+e.toString(16)}var t=o.lut;function n(){return Math.floor(4294967296*Math.random())}var r=n(),i=n(),a=n(),u=n();return t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&a|128]+t[a>>8&255]+"-"+t[a>>16&255]+t[a>>24&255]+t[255&u]+t[u>>8&255]+t[u>>16&255]+t[u>>24&255]}function i(){return Math.floor(Date.now()/1e3)}function a(){return{userAgent:navigator.userAgent||"not-set",screenResolution:(window.screen.width||"not-set")+"x"+(window.screen.height||"not-set"),browserResolution:(window.innerWidth||"not-set")+"x"+(window.innerHeight||"not-set")}}function u(e){return e.split("?")[0]}function c(){var e=navigator.userAgent.toLowerCase();return/ipad/.test(e)||/android/.test(e)&&!/mobile/.test(e)?"tablet":/mobile|iphone|android|ipod|blackberry|iemobile|silk|windows phone|fxios|opera mini|opios|opera mobi/.test(e)?"mobile":/smart-tv|googletv|appletv|hbbtv|netcast|webos|nettv|opera tv|viera|netgem|roku|now tv|firetv|boxee|yospace|mediatech|phillips large screen|youview/.test(e)?"tv":"desktop"}function s(t){if(window.fetch)fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.ok||console.error("Kardio HTTP Error:",e.status)})).catch((function(e){console.error("Kardio Network Error:",e.message)}));else{var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t)),n.onload=function(){200!==n.status&&console.error("Kardio HTTP Error:",n.status)},n.onerror=function(){console.error("Kardio Network Error")}}}function d(e){return"string"==typeof e?parseFloat(parseFloat(e.replace(/[^0-9.-]+/g,"")).toFixed(2)):"number"==typeof e?parseFloat(e.toFixed(2)):0}function l(e){var t=e.reduce((function(e,t){return e+t.price*t.quantity}),0);return Number(t.toFixed(2))}function h(e,t,n,h,m,_,b,g,w){var p=i(),v=r("hb_uid"),f=r("hb_source"),k=f?JSON.parse(f):null;if(!v||!k)return null;var y=o(),C=u(document.referrer),M=a(),S=g?g.replace(/(%20|\+)/g," ").toLowerCase().trim():void 0,D={hb_uid:v||"not-set",hb_timestamp:p,hb_event:e,hb_event_id:y,hb_hostname:window.location.hostname,hb_pathname:window.location.pathname,hb_pagetitle:document.title,hb_referrer:C||"not-set",hb_device:c(),hb_bua:M.userAgent,hb_bsr:M.screenResolution,hb_bbr:M.browserResolution,hb_source:k.hb_source||"not-set",hb_medium:k.hb_medium||"not-set",hb_campaign:k.hb_campaign||"not-set"};if("cart_view"===e){var K=l(t);D.hb_value=K}else if("checkout"===e){K=l(t);D.hb_value=K,D.hb_step=n}if(h&&(D.hb_event_action=h),m&&(D.hb_event_label=m),_&&(D.hb_value=_),w&&(D.hb_currency=w),b&&(D.hb_tid=b.hb_tid,D.hb_revenue=d(b.hb_revenue),D.hb_tax=d(b.hb_tax),D.hb_shipping=d(b.hb_shipping),D.hb_coupon=b.hb_coupon),t){var T=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=void 0!==r.item_category2,a=void 0!==r.item_category3,u={hb_id:r.id||r.item_id,hb_name:r.name||r.item_name,hb_brand:r.brand||r.item_brand,hb_category:r.category||r.item_category,hb_variant:r.variant||r.item_variant,hb_price:d(r.price),hb_quantity:Number(r.quantity)||void 0,hb_item_uuid:o()};i&&(u.item_category2=r.item_category2),a&&(u.item_category3=r.item_category3),t.push(u)}return t}(t);D.hb_items=T}return S&&(D.hb_query=S),s(D),D}function m(e,t){var n=function(e,t){var n=[];return-1!==["view_product","add_to_cart","view_cart","enter_checkout","transaction"].indexOf(e)&&(t.items&&0!==t.items.length||n.push("Kardio: Missing 'items' array for '"+e+"' event. Data received:",t),t.items&&t.items.length>0&&!t.items[0].id&&!t.items[0].item_id&&n.push("Kardio: Missing 'id' or 'item_id' for item in '"+e+"' event. Data received:",t),t.currency||n.push("Kardio: Missing 'currency' for '"+e+"' event. Data received:",t)),"transaction"===e&&(t.transaction?(t.transaction.hb_tid||n.push("Kardio: Missing 'transaction.hb_tid' (transaction ID) for 'transaction' event. Data received:",t),t.transaction.hb_revenue||n.push("Kardio: Missing 'transaction.hb_revenue' for 'transaction' event. Data received:",t)):n.push("Kardio: Missing 'transaction' object for 'transaction' event. Data received:",t)),"search_query"!==e||t.query||n.push("Kardio: Missing 'query' for 'search_query' event. Data received:",t),"goal"!==e&&"custom"!==e||t.event_name||n.push("Kardio: Missing 'event_name' for '"+e+"' event. Data received:",t),n}(e,t);if(n.length>0)for(var r=0;r<n.length;r++)console.warn(n[r]);else try{switch(e){case"view_product":window.kardio.sendViewProduct(t.items,t.currency);break;case"add_to_cart":window.kardio.sendAddToCart(t.items,t.currency);break;case"view_cart":window.kardio.sendViewCart(t.items,t.currency);break;case"enter_checkout":window.kardio.sendEnterCheckout(t.items,t.currency);break;case"transaction":window.kardio.sendTransaction(t.items,t.transaction,t.currency);break;case"search_query":window.kardio.sendSearchQuery(t.query);break;case"custom":window.kardio.sendCustom(t.event_name,t.action,t.label,t.value);break;case"goal":window.kardio.sendGoal(t.event_name);break;default:console.warn("Kardio: Unknown event type. Data received:",t)}}catch(t){console.error("Kardio: Error processing '"+e+"' event. Error details:",t)}}function _(){if(window.kardio&&window.kardio_data&&window.kardio_data.length>0){for(var e=0;e<window.kardio_data.length;e++){var t=window.kardio_data[e];t.event?m(t.event,t):console.warn("Kardio: Missing 'event' type. Data received:",t)}window.kardio_data.length=0}}!function(){var e=r("hb_uid"),d=r("hb_source"),l=d?JSON.parse(d):null,h=!e||!l,m=h?o():e;if(h){var _=function(){var e,n="not-set",r="not-set",o="not-set",i=new URLSearchParams(window.location.search),a=i.get("utm_source"),c=i.get("utm_medium"),s=i.get("utm_campaign"),d=i.get("gclid"),l=u(document.referrer),h=l?function(e){try{return new URL(e).hostname}catch(e){return"not-set"}}(l):"not-set";if(a||c)n=a||"not-set",r=c||"not-set",o=s||"not-set";else if(d)n="google",r="cpc",o="auto+tagging";else if("not-set"===h||(e=h,t.some((function(t){return-1!==e.indexOf(t)}))))n="direct",r="none";else{var m=[{domain:"www.google.",tag:"google"},{domain:"com.google.android.googlequicksearchbox",tag:"google"},{domain:".bing.com",tag:"bing"},{domain:"search.yahoo.com",tag:"yahoo"},{domain:"duckduckgo.com",tag:"duckduckgo"},{domain:"startpage.com",tag:"startpage"}].find((function(e){return h.includes(e.domain)}));m?(n=m.tag,r="organic"):(m=[{domain:".facebook.com",tag:"facebook"},{domain:"instagram.com",tag:"instagram"},{domain:"www.pinterest.",tag:"pinterest"},{domain:".tiktok.com",tag:"tiktok"},{domain:".linkedin.com",tag:"linkedin"}].find((function(e){return h.includes(e.domain)})))?(n=m.tag,r="organic+social"):(n=h,r="referral")}return{utmSource:n,utmMedium:r,utmCampaign:o}}();l&&"direct"!==l.hb_source&&"direct"===_.utmSource&&(_.utmSource=l.hb_source,_.utmMedium=l.hb_medium,_.utmCampaign=l.hb_campaign);var b=o(),g=a(),w=u(document.referrer),p={hb_uid:m,hb_timestamp:i(),hb_hostname:window.location.hostname,hb_pathname:window.location.pathname,hb_pagetitle:document.title,hb_referrer:w||"not-set",hb_event_id:b,hb_device:c(),hb_bua:g.userAgent,hb_bsr:g.screenResolution,hb_bbr:g.browserResolution,hb_event:"start_session",hb_source:_.utmSource,hb_medium:_.utmMedium,hb_campaign:_.utmCampaign},v={hb_source:_.utmSource,hb_medium:_.utmMedium,hb_campaign:_.utmCampaign};n("hb_uid",m,1/48,!1),n("hb_source",JSON.stringify(v),90,!0),s(p)}else n("hb_uid",e,1/48,!1),n("hb_source",JSON.stringify(l),90,!0)}(),window.kardio_data.push=function(){Array.prototype.push.apply(this,arguments),window.kardio&&_()};var b={sendViewProduct:function(e,t){return h("view_product",e,null,null,null,null,null,null,t)},sendAddToCart:function(e,t){return h("add_to_cart",e,null,null,null,null,null,null,t)},sendViewCart:function(e,t){return h("view_cart",e,null,null,null,null,null,null,t)},sendEnterCheckout:function(e,t,n){return h("enter_checkout",e,t,null,null,null,null,null,n)},sendTransaction:function(e,t,n){return h("transaction",e,null,null,null,null,t,null,n)},sendCustom:function(e,t,n,r){return h(e,null,null,t,n,r,null,null,null)},sendSearchQuery:function(e){return h("search_query",null,null,null,null,null,null,e,null)},sendGoal:function(e){return h(e)}};return window.kardio=b,_(),b}();